<?xml version="1.0"?>
<Container version="2">
  <Name>stoat-inabox</Name>
  <Repository>ethxn/stoat-inabox:latest</Repository>
  <Network>host</Network>
  <Privileged>false</Privileged>
  <Overview>Automatically sets up a full Stoat self-hosted chat instance on Unraid as a VM. Downloads Ubuntu 22.04, provisions a VM, installs Docker, and deploys the entire Stoat stack — all automatically. &#xA;&#xA;Requirements:&#xA;- Virtualization (VT-x / AMD-V) must be enabled&#xA;- Unraid VM Manager must be enabled&#xA;- A domain name pointed at your server (required for HTTPS)&#xA;&#xA;First boot takes 5-10 minutes. The VM will appear in your Unraid VM tab as "Stoat".</Overview>
  <Category>Network:Messenger</Category>
  <WebUI>https://[DOMAIN]/</WebUI>
  <Icon>https://stoat.chat/favicon.ico</Icon>
  <TemplateURL>https://raw.githubusercontent.com/hawwwwwk/stoat-inabox/main/stoat-inabox.xml</TemplateURL>
  <Support>https://github.com/hawwwwwk/stoat-inabox/issues</Support>
  <Project>https://stoat.chat</Project>

  <!-- Libvirt socket — lets the container create and manage VMs -->
  <Config Name="Libvirt Socket" Target="/var/run/libvirt/libvirt-sock"
    Default="/var/run/libvirt/libvirt-sock" Mode="rw" Type="Path"
    Display="always" Required="true" Mask="false">
    /var/run/libvirt/libvirt-sock
  </Config>

  <!-- Appdata — stores cloud-init config and state flags -->
  <Config Name="Appdata Location" Target="/appdata"
    Default="/mnt/user/appdata/stoat" Mode="rw" Type="Path"
    Display="always" Required="true" Mask="false">
    /mnt/user/appdata/stoat
  </Config>

  <!-- Domains — where the VM disk image is stored -->
  <Config Name="VM Images Location" Target="/mnt/user/domains"
    Default="/mnt/user/domains" Mode="rw" Type="Path"
    Display="always" Required="true" Mask="false">
    /mnt/user/domains
  </Config>

  <!-- Your domain name — must be a real domain for HTTPS to work -->
  <Config Name="Domain" Target="DOMAIN" Default="stoat.yourdomain.com"
    Type="Variable" Display="always" Required="true" Mask="false">
    stoat.yourdomain.com
  </Config>

  <!-- VM settings -->
  <Config Name="VM Name" Target="VMNAME" Default="Stoat"
    Type="Variable" Display="always" Required="false" Mask="false">
    Stoat
  </Config>

  <Config Name="VM CPU Cores" Target="VM_CPUS" Default="2"
    Type="Variable" Display="always" Required="false" Mask="false">
    2
  </Config>

  <Config Name="VM RAM (MB)" Target="VM_RAM" Default="4096"
    Type="Variable" Display="always" Required="false" Mask="false">
    4096
  </Config>

  <Config Name="VM Disk Size (GB)" Target="VM_DISK" Default="40"
    Type="Variable" Display="always" Required="false" Mask="false">
    40
  </Config>

  <!-- Host paths — these must match the actual paths on your Unraid server -->
  <Config Name="Appdata Host Path" Target="APPDATA_HOST"
    Default="/mnt/user/appdata/stoat" Type="Variable"
    Display="advanced" Required="true" Mask="false">
    /mnt/user/appdata/stoat
  </Config>

  <Config Name="Domains Host Path" Target="DOMAINS_HOST"
    Default="/mnt/user/domains" Type="Variable"
    Display="advanced" Required="true" Mask="false">
    /mnt/user/domains
  </Config>

  <Config Name="Check Interval (minutes)" Target="CHECK_INTERVAL" Default="15"
    Type="Variable" Display="advanced" Required="false" Mask="false">
    15
  </Config>
</Container>